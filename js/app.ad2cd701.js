(function(){"use strict";var t={3256:function(t,e,s){var r=s(6369),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},a=[],n=s(1001),i={},c=(0,n.Z)(i,o,a,!1,null,null,null),l=c.exports,p=s(2631),u=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("KakaoMap")],1)},d=[],h=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"kakao-map-wrap"},[e("div",{staticClass:"api-key-form"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.apiKey,expression:"apiKey"}],attrs:{type:"text"},domProps:{value:t.apiKey},on:{input:function(e){e.target.composing||(t.apiKey=e.target.value)}}}),e("button",{on:{click:function(e){return t.run()}}},[t._v("api 키 적용")])]),e("div",{ref:"kakaoMapElement",attrs:{id:"map"}})])},f=[],k=s(7327),m=(s(7658),s(9041)),v=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{ref:"cluster",staticClass:"cluster",on:{click:function(e){return e.stopPropagation(),t.onClusterClick()}}},[e("div",{staticClass:"map-cluster"},[e("span",{staticClass:"count"},[t._v(t._s(t.count))])]),t.openMcList?e("div",{ref:"mcListBox",staticClass:"mc-list"},t._l(t.dataSet,(function(s){return e("div",{key:s.mc.id,ref:"listItem",refInFor:!0,staticClass:"mc-item",class:t.selectedMarker(s),on:{click:function(e){return e.stopPropagation(),t.onClusterInMcItemClick(s.mc.id)}}},[t._v(" "+t._s(s.mc.place_name)+" ")])})),0):t._e()])},y=[],C=function(t,e,s,r){var o,a=arguments.length,n=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,s):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,s,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(n=(a<3?o(n):a>3?o(e,s,n):o(e,s))||n);return a>3&&n&&Object.defineProperty(e,s,n),n};let L=class extends m.w3{constructor(...t){super(...t),(0,k.Z)(this,"markers",void 0),(0,k.Z)(this,"mcList",void 0),(0,k.Z)(this,"openMcList",void 0),(0,k.Z)(this,"listItem",void 0),(0,k.Z)(this,"mcListBox",void 0),(0,k.Z)(this,"cluster",void 0),(0,k.Z)(this,"count",0),(0,k.Z)(this,"dataSet",[])}async onOpenMcList(t,e){await this.$nextTick((()=>{this.changeEvent(t)}))}async mounted(){console.log(this.mcList),this.count=this.markers.length,this.markers.forEach(((t,e)=>{this.dataSet.push({mc:this.mcList[e],marker:t})}))}onClusterClick(){return this.openMcList}onClusterInMcItemClick(t){return t}selectedMarker(t){const e=t.marker.getContent(),s=e.classList.contains("act");return{selected:s}}selectedTracking(){const t=this.markers.findIndex((t=>{const e=t.getContent();return e.classList.contains("act")}));-1!==t&&this.mcListBox.scrollTo(0,this.listItem[t].offsetTop)}changeEvent(t){const e=this.cluster.parentElement;t?(this.selectedTracking(),e.style.zIndex="10"):e.style.zIndex=""}};C([(0,m.fI)()],L.prototype,"markers",void 0),C([(0,m.fI)()],L.prototype,"mcList",void 0),C([(0,m.fI)()],L.prototype,"openMcList",void 0),C([(0,m.Rl)("listItem")],L.prototype,"listItem",void 0),C([(0,m.Rl)("mcListBox")],L.prototype,"mcListBox",void 0),C([(0,m.Rl)("cluster")],L.prototype,"cluster",void 0),C([(0,m.RL)("openMcList")],L.prototype,"onOpenMcList",null),C([(0,m.y1)("onClusterClick")],L.prototype,"onClusterClick",null),C([(0,m.y1)("onClusterInMcItemClick")],L.prototype,"onClusterInMcItemClick",null),L=C([m.wA],L);var x=L,w=x,g=(0,n.Z)(w,v,y,!1,null,null,null),M=g.exports,I=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"map-pin"})},Z=[],O=function(t,e,s,r){var o,a=arguments.length,n=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,s):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,s,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(n=(a<3?o(n):a>3?o(e,s,n):o(e,s))||n);return a>3&&n&&Object.defineProperty(e,s,n),n};let b=class extends m.w3{};b=O([m.wA],b);var P=b,_=P,S=(0,n.Z)(_,I,Z,!1,null,null,null),E=S.exports,j=function(t,e,s,r){var o,a=arguments.length,n=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,s):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,s,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(n=(a<3?o(n):a>3?o(e,s,n):o(e,s))||n);return a>3&&n&&Object.defineProperty(e,s,n),n};let $=class extends m.w3{constructor(...t){super(...t),(0,k.Z)(this,"kakaoMapElement",void 0),(0,k.Z)(this,"mapContainer",null),(0,k.Z)(this,"kakaoMapSearchService",null),(0,k.Z)(this,"searchList",[]),(0,k.Z)(this,"searchEnd",!1),(0,k.Z)(this,"customOverlayList",[]),(0,k.Z)(this,"mapBounds",null),(0,k.Z)(this,"kakaoMapClusterer",null),(0,k.Z)(this,"clursterList",[]),(0,k.Z)(this,"clursterComponentList",[]),(0,k.Z)(this,"prevSelectedIdx",-1),(0,k.Z)(this,"selectedIdx",-1),(0,k.Z)(this,"apiKey",""),(0,k.Z)(this,"excludeClusterIdx",-1)}run(){this.kakaoMapInit()}onSearchEnd(t){t&&(this.makeCustomOverlayList(),this.customOverlayList.forEach((t=>{this.mapBounds.extend(t.getPosition())})),this.mapContainer.setBounds(this.mapBounds),this.searchEnd=!1,this.kakaoMapSetClusterer(),this.kakaoMapClusterer.redraw())}kakaoMapInit(){let t=document.querySelector(`script[src='https://dapi.kakao.com/v2/maps/sdk.js?appkey=${this.apiKey}&autoload=false&libraries=services,clusterer,drawing']`);if(null===t){t=document.createElement("script"),t.src=`https://dapi.kakao.com/v2/maps/sdk.js?appkey=${this.apiKey}&autoload=false&libraries=services,clusterer,drawing`,t.type="text/javascript",t.onload=()=>{window.kakao.maps.load((()=>{this.kakaoMapLoad()}))},t.onerror=()=>{t.remove()};const e=document.head;e.appendChild(t)}else this.kakaoMapLoad()}kakaoMapLoad(){this.createKakaoMapContainer(),this.createkakaoMapSearchService(),this.categorySearch()}createKakaoMapContainer(){this.mapContainer=new window.kakao.maps.Map(this.kakaoMapElement,{center:new window.kakao.maps.LatLng(33.450701,126.570667),level:5}),this.mapBounds=this.mapContainer.getBounds()}createkakaoMapSearchService(){this.mapContainer&&(this.kakaoMapSearchService=new window.kakao.maps.services.Places(this.mapContainer))}categorySearch(){this.kakaoMapSearchService&&this.kakaoMapSearchService.categorySearch("FD6",((t,e,s)=>{e===window.kakao.maps.services.Status.OK&&(this.searchList.push(t),s.hasNextPage||(this.searchList=this.searchList.flat(),this.searchEnd=!0),s.nextPage())}))}makeCustomOverlayList(){this.searchList.forEach(((t,e)=>{const s=new E;s.$mount(),s.$el.addEventListener("click",(t=>{const s=e,r=t.target;if(-1!==this.selectedIdx&&this.selectedIdx===s)r.classList.remove("act"),this.selectedIdx=-1,this.prevSelectedIdx=-1;else if(-1!==this.selectedIdx){this.prevSelectedIdx=this.selectedIdx;const t=this.customOverlayList[this.prevSelectedIdx].getContent();t.classList.remove("act"),r.classList.add("act"),this.selectedIdx=s,this.clursterComponentList.forEach(((t,e)=>{this.excludeClusterIdx!==e&&(t.$props["openMcList"]=!1)}))}else r.classList.add("act"),this.selectedIdx=s;this.excludeClusterIdx=-1,this.clursterComponentList.forEach((t=>{t.$forceUpdate()}))}));const r=new window.kakao.maps.CustomOverlay({map:this.mapContainer,clickable:!0,content:s.$el,position:new window.kakao.maps.LatLng(t.y,t.x)});this.customOverlayList.push(r)}))}kakaoMapSetClusterer(){this.kakaoMapClusterer=new window.kakao.maps.MarkerClusterer({map:this.mapContainer,markers:this.customOverlayList,gridSize:32,averageCenter:!0,disableClickZoom:!0}),window.kakao.maps.event.addListener(this.kakaoMapClusterer,"clustered",this.onClusterer)}onClusterer(t){this.clursterComponentList=[],t?.forEach(((t,e)=>{const s=t.getMarkers(),r=[],o=t.getClusterMarker();s.forEach((t=>{const e=this.customOverlayList.findIndex((e=>{const s=t.getPosition(),r=e.getPosition();return s.equals(r)}));-1!==e&&r.push(this.searchList[e])}));const a=new M;a.$props["markers"]=s,a.$props["mcList"]=r,a.$props["openMcList"]=!1,a.$on("onClusterClick",(t=>{t||this.clursterComponentList.forEach((t=>{t.$props["openMcList"]=!1})),a.$props["openMcList"]=!t})),a.$on("onClusterInMcItemClick",(t=>{const s=this.searchList.findIndex((e=>e.id===t));if(-1!==s){this.excludeClusterIdx=e,this.prevSelectedIdx=this.selectedIdx;const t=this.customOverlayList[s].getContent(),r=new Event("click");t.dispatchEvent(r),a.$forceUpdate()}})),a.$mount(),this.clursterComponentList.push(a),o.setContent(a.$el)}))}};j([(0,m.Rl)("kakaoMapElement")],$.prototype,"kakaoMapElement",void 0),j([(0,m.RL)("searchEnd",{immediate:!0})],$.prototype,"onSearchEnd",null),$=j([m.wA],$);var R=$,K=R,B=(0,n.Z)(K,h,f,!1,null,"19dc2fb7",null),T=B.exports,D=function(t,e,s,r){var o,a=arguments.length,n=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,s):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,s,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(n=(a<3?o(n):a>3?o(e,s,n):o(e,s))||n);return a>3&&n&&Object.defineProperty(e,s,n),n};let A=class extends r.ZP{};A=D([(0,m.wA)({components:{KakaoMap:T}})],A);var z=A,F=z,q=(0,n.Z)(F,u,d,!1,null,null,null),N=q.exports;r.ZP.use(p.ZP);const U=[{path:"/",name:"kakaoMap",component:N}],G=new p.ZP({mode:"history",base:"/kakao-map-demo/",routes:U});var H=G,J=s(3822);r.ZP.use(J.ZP);var Q=new J.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}});r.ZP.config.productionTip=!1,new r.ZP({router:H,store:Q,render:t=>t(l)}).$mount("#app")}},e={};function s(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,s),a.exports}s.m=t,function(){var t=[];s.O=function(e,r,o,a){if(!r){var n=1/0;for(p=0;p<t.length;p++){r=t[p][0],o=t[p][1],a=t[p][2];for(var i=!0,c=0;c<r.length;c++)(!1&a||n>=a)&&Object.keys(s.O).every((function(t){return s.O[t](r[c])}))?r.splice(c--,1):(i=!1,a<n&&(n=a));if(i){t.splice(p--,1);var l=o();void 0!==l&&(e=l)}}return e}a=a||0;for(var p=t.length;p>0&&t[p-1][2]>a;p--)t[p]=t[p-1];t[p]=[r,o,a]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,r){var o,a,n=r[0],i=r[1],c=r[2],l=0;if(n.some((function(e){return 0!==t[e]}))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(c)var p=c(s)}for(e&&e(r);l<n.length;l++)a=n[l],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(p)},r=self["webpackChunkkakao_map_test"]=self["webpackChunkkakao_map_test"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(3256)}));r=s.O(r)})();
//# sourceMappingURL=app.ad2cd701.js.map